# 接口功能模块总览

## Admin端模块 (端口8080)

### 🔗 访问地址: http://localhost:8080/doc.html

| 分组名称 | 控制器 | 主要功能 | 接口数量 |
|---------|--------|---------|---------|
| 用户管理 | UserController | 用户CRUD、状态管理、用户统计 | ~8个接口 |
| 角色管理 | RoleController | 角色CRUD、状态管理、角色统计 | ~7个接口 |
| 用户角色管理 | UserRoleController | 角色分配、批量分配、角色查询 | ~5个接口 |

#### 详细接口列表:

**用户管理模块:**
- `GET /admin/user/list` - 用户列表查询
- `GET /admin/user/detail/{userId}` - 用户详情查询  
- `PUT /admin/user/status` - 用户状态管理(JSON)
- `PUT /admin/user/status-form` - 用户状态管理(表单)
- `GET /admin/user/statistics` - 用户统计数据
- `GET /admin/user/search` - 用户搜索
- `GET /admin/user/{userId}/roles` - 用户角色查询
- `POST /admin/user/export` - 用户数据导出

**角色管理模块:**
- `GET /admin/role/list` - 角色列表查询
- `GET /admin/role/detail/{roleId}` - 角色详情查询
- `PUT /admin/role/status` - 角色状态管理(JSON)
- `PUT /admin/role/status-form` - 角色状态管理(表单)  
- `GET /admin/role/available` - 获取可用角色列表
- `GET /admin/role/statistics` - 角色统计数据
- `GET /admin/role/{roleId}/users` - 角色用户列表

**用户角色管理模块:**
- `POST /admin/user-role/assign` - 用户角色分配(JSON)
- `POST /admin/user-role/assign-form` - 用户角色分配(表单)
- `POST /admin/user-role/batch-assign` - 批量角色分配
- `DELETE /admin/user-role/remove` - 移除用户角色
- `GET /admin/user-role/statistics` - 用户角色统计

---

## App端模块 (端口8081)

### 🔗 访问地址: http://localhost:8081/doc.html

| 分组名称 | 控制器 | 主要功能 | 接口数量 |
|---------|--------|---------|---------|
| 01-用户认证 | AuthController | 注册、登录、验证码等认证功能 | 6个接口 |
| 02-个人信息管理 | ProfileController | 个人信息CRUD、密码修改等 | ~8个接口 |
| 12-角色管理 | RoleController | 角色查询功能 | 2个接口 |
| 简单认证 | SimpleAuthController | 简化版登录接口 | 1个接口 |

#### 详细接口列表:

**01-用户认证模块 (AuthController):**
- `POST /app/auth/sms-code/send` - 发送短信验证码
- `POST /app/auth/register` - 用户注册
- `POST /app/auth/login` - 用户登录
- `POST /app/auth/refresh-token` - 刷新令牌
- `POST /app/auth/forget-password` - 忘记密码
- `POST /app/auth/logout` - 退出登录

**02-个人信息管理模块 (ProfileController):**
- `GET /app/profile/info` - 获取个人信息
- `PUT /app/profile/update` - 更新个人信息
- `PUT /app/profile/change-password` - 修改密码
- `PUT /app/profile/bind-phone` - 绑定手机号
- `POST /app/profile/avatar/upload` - 头像上传
- `GET /app/profile/login-history` - 登录历史
- `GET /app/profile/security-log` - 安全日志
- `PUT /app/profile/privacy-settings` - 隐私设置

**12-角色管理模块 (RoleController):**
- `GET /app/role/list` - 角色列表查询
- `GET /app/role/available` - 获取可用角色列表

**简单认证模块 (SimpleAuthController):**
- `POST /app/simple/login` - 简化登录接口

---

## 🎯 核心测试流程推荐

### Admin端核心流程:
1. **用户管理验证**: 用户列表 → 用户详情 → 用户状态管理
2. **角色管理验证**: 角色列表 → 角色统计 → 可用角色
3. **权限管理验证**: 用户角色分配 → 批量分配 → 角色移除

### App端核心流程:
1. **注册登录流程**: 发送验证码 → 用户注册 → 密码登录 → 刷新token
2. **个人中心流程**: 获取信息 → 更新信息 → 修改密码 → 绑定手机
3. **权限查询流程**: 角色列表查询 → 可用角色查询

---

## 📋 完整功能特性

### Admin端特色功能:
✅ 完整的用户管理(CRUD)  
✅ 角色权限管理  
✅ 批量操作支持  
✅ 数据统计功能  
✅ 状态管理(启用/禁用)  
✅ 数据导出功能  
✅ 表单和JSON双格式支持  

### App端特色功能:
✅ 短信验证码认证  
✅ 多种登录方式(密码/短信)  
✅ JWT token认证  
✅ 个人信息管理  
✅ 密码安全管理  
✅ 设备信息记录  
✅ 登录历史追踪  

---

## 🔧 开发模式配置

### 测试环境特点:
- **验证码固定**: 123456
- **Token有效期**: 2小时 (access_token)
- **刷新token有效期**: 7天
- **验证码有效期**: 5分钟
- **发送频率限制**: 10秒/次

### 数据库测试数据:
- **测试用户**: admin, testuser, coach001
- **测试角色**: 超级管理员, 管理员, 普通用户, 教练等
- **测试手机号**: 13888888888, 13800138002等

---

## 🚀 快速开始建议

### 1. 首次测试 (推荐顺序):
1. **Admin端**: 角色列表 → 用户列表 → 角色分配
2. **App端**: 验证码 → 注册 → 登录 → 个人信息

### 2. 完整功能测试:
按照上述核心测试流程，逐个模块验证

### 3. 异常情况测试:
- 参数验证错误
- 权限验证失败  
- 业务逻辑异常
- 网络异常处理

这样你就可以在Knife4j中完整测试所有已实现的功能模块了！