<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.huang.mapper.AppCoachAvailabilityMapper">

    <!-- 查询教练可用性列表 -->
    <select id="selectCoachAvailabilityList" resultType="com.huang.web.app.vo.coach.CoachAvailabilityVO">
        SELECT 
            ca.id,
            ca.coach_id,
            ca.day_of_week,
            CASE 
                WHEN ca.day_of_week = 1 THEN '周一'
                WHEN ca.day_of_week = 2 THEN '周二'
                WHEN ca.day_of_week = 3 THEN '周三'
                WHEN ca.day_of_week = 4 THEN '周四'
                WHEN ca.day_of_week = 5 THEN '周五'
                WHEN ca.day_of_week = 6 THEN '周六'
                WHEN ca.day_of_week = 7 THEN '周日'
                ELSE '未知'
            END as day_of_week_name,
            ca.start_time,
            ca.end_time,
            ca.is_available,
            CASE 
                WHEN ca.is_available = 1 THEN '可用'
                WHEN ca.is_available = 0 THEN '不可用'
                ELSE '未知'
            END as available_status_name,
            ca.create_time,
            ca.update_time
        FROM coach_availability ca
        WHERE ca.is_deleted = 0 
        AND ca.coach_id = #{coachId}
        ORDER BY ca.day_of_week ASC
    </select>

    <!-- 根据教练ID和星期几查询可用性 -->
    <select id="selectByCoachIdAndDayOfWeek" resultType="com.huang.model.entity.CoachAvailability">
        SELECT * FROM coach_availability 
        WHERE is_deleted = 0 
        AND coach_id = #{coachId} 
        AND day_of_week = #{dayOfWeek}
        LIMIT 1
    </select>

</mapper>